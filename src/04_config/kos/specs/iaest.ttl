#*********************************************************
#							Prefijo
#*********************************************************
@prefix spec:               <http://education.data.gov.uk/api-config#> .
@prefix api:                <http://purl.org/linked-data/api/vocab#> .
@prefix dct:				<http://purl.org/dc/terms/> .
@prefix schema:				<http://schema.org/> .
@prefix owl: 				<http://www.w3.org/2002/07/owl#> .
@prefix rdf:                <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:               <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd:                <http://www.w3.org/2001/XMLSchema#> .
@prefix elda:               <http://www.epimorphics.com/vocabularies/lda#> .
@prefix fctic:				<http://idi.fundacionctic.org/cruzar/turismo#>.
@prefix dolce:				<http://www.loa-cnr.it/ontologies/DOLCE-Lite#>.
@prefix geo:				<http://www.w3.org/2003/01/geo/wgs84_pos#>.
@prefix geo2:				<http://www.oeg-upm.net/ontologies/geo#>.
@prefix skos:				<http://www.w3.org/2004/02/skos/core#>.
@prefix fn:					<http://www.w3.org/2005/xpath-functions#>.
@prefix dc:					<http://purl.org/dc/elements/1.1/> .
@prefix hig:				<http://www.hans-im-glueck.de/> .
@prefix purlgr:				<http://purl.org/goodrelations/v1#>.
@prefix vcard: 				<http://www.w3.org/2006/vcard/ns#> .
@prefix dul:   				<http://ontologydesignpatterns.org/ont/dul/DUL.owl#> .
@prefix biobi-location: 	<http://datos.biobi.org/recurso/location/> .
@prefix media-location: 	<http://datos.biobi.org/recurso/media/> .
@prefix eslugar: 			<http://vocab.linkeddata.es/datosabiertos/def/turismo/lugar#> .
@prefix ma-ont: 			<http://www.w3.org/ns/ma-ont#> .
@prefix lode:  				<http://linkedevents.org/ontology/> .
@prefix locn:  				<http://www.w3.org/ns/locn#> .
@prefix esadm: 				<http://vocab.linkeddata.es/datosabiertos/def/sector-publico/territorio#> .
@prefix gsp:   				<http://www.opengis.net/ont/geosparql#> .

@prefix foaf: 				<http://xmlns.com/foaf/0.1/> .
@prefix qb:					<http://purl.org/linked-data/cube#> .
@prefix sdmx-concept:    <http://purl.org/linked-data/sdmx/2009/concept#> .
@prefix sdmx-dimension:  <http://purl.org/linked-data/sdmx/2009/dimension#> .
@prefix sdmx-attribute:  <http://purl.org/linked-data/sdmx/2009/attribute#> .
@prefix sdmx-measure:    <http://purl.org/linked-data/sdmx/2009/measure#> .
@prefix sdmx-metadata:   <http://purl.org/linked-data/sdmx/2009/metadata#> .
@prefix sdmx-code:       <http://purl.org/linked-data/sdmx/2009/code#> .
@prefix sdmx-subject:    <http://purl.org/linked-data/sdmx/2009/subject#> .
@prefix iaest-dimension: <http://alzir.dia.fi.upm.es/def/iaest/dimension#> .
@prefix iaest-measure:    <http://alzir.dia.fi.upm.es/def/iaest/medida#> .


@prefix OpenData:			<http://alzir.dia.fi.upm.es/standalone/vocabulary/>.

#*********************************************************
#							VISTAS
#*********************************************************


#OpenData:vistaDsd
#	a api:Viewer 
#	; api:name "Dsd" 	
#	; api:properties 
#		"rdfs:label",
#		"skos:notation"
#		.

OpenData:basico
	a api:Viewer 
	; api:name "basico" 	
	; api:properties 
		"prefLabel",
		"notation".

OpenData:todo
	a api:Viewer 
	; api:name "todo" 	
	; api:properties 
		"inScheme",
		"notation",
		"prefLabel",
		"narrower.notation, narrower.prefLabel"
		.

#*******************************************************************
# 								API
#*******************************************************************	
<http://138.100.11.63:8890/sparql> elda:supportsNestedSelect true.
<http://alzir.dia.fi.upm.es:8890/sparql> elda:supportsNestedSelect true.

OpenData:iaest a api:API 
	; rdfs:label "iaest Open Data"@es
	; api:sparqlEndpoint <http://alzir.dia.fi.upm.es:8890/sparql>	
	#; api:defaultViewer OpenData:vistaObservacion
	; api:defaultViewer api:labelledDescribeViewer
	#; api:defaultViewer spec:viewerMedium	
	; api:defaultFormatter OpenData:HtmlFormatter 
	; api:formatter 
		OpenData:HtmlFormatter,
		OpenData:CsvFormatter,
		OpenData:GeoJsonFormatter	
	; api:maxPageSize 200;
	; api:defaultPageSize 10;	
	; api:endpoint
		OpenData:CodelistId,
		OpenData:CodelistIdValue
	; api:viewer 					
		#api:labelledDescribeViewer		
		OpenData:basico,
		OpenData:todo
		#OpenData:vistaDsdId,
		#OpenData:vistaProperties
	.
	

#*******************************************************************
# 					Endpoint definition	
#*******************************************************************

	
OpenData:CodelistId a api:ListEndpoint 
	; rdfs:label "Codelist por Id" 	
	; api:uriTemplate "{idcodelist}" 
	; api:defaultViewer OpenData:todo
	; api:variable [api:name "uriITEM"; api:value "http://alzir.dia.fi.upm.es/kos/iaest/{idcodelist}"]	
	; api:selector [
		api:where """
			{				
				graph <http://alzir.dia.fi.upm.es:8890/kos>
				{
				?item a skos:ConceptScheme.
				FILTER (?item = IRI(?uriITEM))	.
				}
			}
			""" ; 	
			] ;
	.	

OpenData:CodelistIdValue a api:ListEndpoint 
	; rdfs:label "Codelist por Id y valor" 	
	; api:uriTemplate "{idcodelist}/{valor}" 
	; api:defaultViewer OpenData:todo
	; api:variable [api:name "uriITEM"; api:value "http://alzir.dia.fi.upm.es/kos/iaest/{idcodelist}/{valor}"]	
	; api:selector [
		api:where """
			{				
				graph <http://alzir.dia.fi.upm.es:8890/kos>
				{
				?item a skos:Concept.
				FILTER (?item = IRI(?uriITEM))	.
				}
			}
			""" ; 	
			] ;
	.	
	

	
#*******************************************************************
# This XSLT formatter produces rich HTML from the viewer properties.
#*******************************************************************

#OpenData:HtmlFormatter a api:JsonFormatter 
OpenData:HtmlFormatter a api:XsltFormatter 
	; api:name "html" 
	; api:mimeType "text/html; charset=UTF-8" 
	#; api:stylesheet "lda-assets/xslt/result-osm-trimmed.xsl"
	; api:stylesheet "lda-assets/xslt/localidata_aragon.xsl"
	.

	
OpenData:CsvFormatter	a api:XsltFormatter ;
	api:name "csv" ;
	api:mimeType "text/csv; charset=utf-8" ;
	api:stylesheet "lda-assets/xslt/csv.xsl"
	.		 	
	
OpenData:GeoJsonFormatter	a api:XsltFormatter ;
	api:name "geojson" ;
	api:mimeType "application/geojson; charset=utf-8" ;
	api:stylesheet "lda-assets/xslt/treeview.xsl"
	.

#*******************************************************************
# 					Vocabulario
#*******************************************************************	

rdf:type api:label "type" .

rdfs:label api:label "label".
	
rdfs:comment api:label "comment".

skos:notation api:label "notation".

skos:prefLabel api:label "prefLabel".

skos:narrower api:label "narrower".

skos:inScheme api:label "inScheme".

dc:description api:label "description".
	
skos:broader api:label "broader".
